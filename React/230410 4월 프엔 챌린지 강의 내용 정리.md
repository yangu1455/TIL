230410 1교시 강의 내용 정리

React 최적화

Next.js - First Load JS
1. 클라이언트 최초 rendering할때 자바스크립트가 얼마나 걸리느냐~
  - 렌더링 될 때의 파일 크기를 쭉~ 보여준다. (빨간색이 너무 큰 경우)
2. 성능 측정 후 개선 사항 도출
3. @next/bundle-analyzer 라는 패키지가 있음.
  a. https://github.com/vercel/next.js/tree/canary/packages/next-bundle-analyzer
  b. 번들링 됐을 때 용량을 많이 잡아먹는 친구를 알려준다.
  c. 클라이언트 빌드되면 각각의 크기를 시각화해서 용량 많이 잡아먹는 친구를 알려준다. 네모 블록처럼 착착착..
  d. 설치하고 나서 package.json에 "analyze": "cross-env ANALYZE=true next build" 뭐 이런 것을 넣음
     서버만 볼지 브라우저만 볼지도 정할 수 있음. `analyze:server`,`analyze:browser` 이런식으로
  e. 근데 초반에 대부분 용량 많이 잡아먹는 친구들이 노드 모듈스 안에 들어있는 친구들임 
     & 리액트 같은 경우에는 데브툴스 같은 개발자 도구들이 용량을 많이 잡아먹는다
    - 최적화할수없기 때문에 초반에는 할게 딱히 없다~
  f. = 최적화는 미리 하는 것이 아니다~ 하다가 프로젝트 끝날때쯤에 내가 실제로 개선할게 있을때 보는 것이다.


하지만 최적화 툴들은 어떻게 고칠지는 안알려준다..~
그리고 어떻게 측정했는지도 안알려준다~
그래서 계속해서 파일을 뒤지면서 유추해가며 개선해야하는 것이 일이긴하다.

-------

Lighthouse
1. 구글에서 만든 퍼포먼스 측정 도구 
  a. 다양한 지표들이 있음
  b. 개인적으로 크게 의미 없다고 생각함
  c. 하지만 면접에서 물어볼 수 있으니 알아두면 좋음
2. 3가지 타입:
  https://github.com/GoogleChrome/lighthouse/blob/HEAD/docs/user-flows.md
  a. Navigation 
  b. Timespan 
  c. Snapshot


Profiler
1. React에서 제공하는 성능 측정도구 
  a. https://react.dev/reference/react/Profiler
2. 컴포넌트별로 렌더링 시간을 확인할 수 있음
3. 용어설명
  a. phase: mount, update, nested-update
  b. actualDuration: Profiler를 렌더링하는데 걸린 시간
  c. baseDuration: 아무런 최적화 없이 Profiler를 렌더링할 때 걸릴 시간 (예상치)
  d. startTime: rendering을 시작한 시간
  e. endTime: rendering이 commit된 시간


개발자도구 - Performance
1. 개발자도구 탭에서 볼 수 있는 내용들
2. 지표를 보고 개선할 내용들은 크게 없고 개념을 알 수 있음
3. Web Vital
  a. https://web.dev/vitals/#core-web-vitals
  b. LCP - Largest Contentful Paint
  c. FID - First Input Delay
  d. CLS - Cumulative Layout Shift



